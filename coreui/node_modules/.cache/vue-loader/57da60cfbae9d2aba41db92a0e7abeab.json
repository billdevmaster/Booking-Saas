{"remainingRequest":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\roles\\Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\roles\\Roles.vue","mtime":1685723693300},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1JvbGVzJywNCiAgZGF0YTogKCkgPT4gew0KICAgIHJldHVybiB7DQogICAgICBpdGVtczogW10sDQogICAgICBmaWVsZHM6IFsnbmFtZScsICdoaWVyYXJjaHknLCAnbW92ZS11cCcsICdtb3ZlLWRvd24nLCAnc2hvdycsICdlZGl0JywgJ2RlbGV0ZSddLA0KICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICBwZXJQYWdlOiA1LA0KICAgICAgdG90YWxSb3dzOiAwLA0KICAgICAgeW91OiBudWxsLA0KICAgICAgbWVzc2FnZTogJycsDQogICAgICBzaG93TWVzc2FnZTogZmFsc2UsDQogICAgICBkaXNtaXNzU2VjczogNywNCiAgICAgIGRpc21pc3NDb3VudERvd246IDAsDQogICAgICBzaG93RGlzbWlzc2libGVBbGVydDogZmFsc2UNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRSb3dDb3VudCAoaXRlbXMpIHsNCiAgICAgIHJldHVybiBpdGVtcy5sZW5ndGgNCiAgICB9LA0KICAgIHJvbGVMaW5rIChpZCkgew0KICAgICAgcmV0dXJuIGByb2xlcy8ke2lkLnRvU3RyaW5nKCl9YA0KICAgIH0sDQogICAgZWRpdExpbmsgKGlkKSB7DQogICAgICByZXR1cm4gYHJvbGVzLyR7aWQudG9TdHJpbmcoKX0vZWRpdGANCiAgICB9LA0KICAgIHNob3dSb2xlICggaWQgKSB7DQogICAgICBjb25zdCByb2xlTGluayA9IHRoaXMucm9sZUxpbmsoIGlkICk7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogcm9sZUxpbmt9KTsNCiAgICB9LA0KICAgIGVkaXRSb2xlICggaWQgKSB7DQogICAgICBjb25zdCBlZGl0TGluayA9IHRoaXMuZWRpdExpbmsoIGlkICk7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogZWRpdExpbmt9KTsNCiAgICB9LA0KICAgIGRlbGV0ZVJvbGUgKCBpZCApIHsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIGxldCBub3RlSWQgPSBpZDsNCiAgICAgIGF4aW9zLnBvc3QoICB0aGlzLiRhcGlBZHJlc3MgKyAnL2FwaS9yb2xlcy8nICsgaWQgKyAnP3Rva2VuPScgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXBpX3Rva2VuIiksIHsNCiAgICAgICAgX21ldGhvZDogJ0RFTEVURScNCiAgICAgIH0pDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICdzdWNjZXNzJyl7DQogICAgICAgICAgICBzZWxmLm1lc3NhZ2UgPSAnU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgcm9sZS4nOw0KICAgICAgICAgICAgc2VsZi5zaG93QWxlcnQoKTsNCiAgICAgICAgICAgIHNlbGYuZ2V0Um9sZXMoKTsNCiAgICAgICAgfWVsc2UgaWYocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICdyZWplY3RlZCcpew0KICAgICAgICAgICAgc2VsZi5tZXNzYWdlID0gIkNhbid0IGRlbGV0ZS4gUm9sZSBoYXMgYXNzaWduZWQgb25lIG9yIG1vcmUgbWVudSBlbGVtZW50cy4iOw0KICAgICAgICAgICAgc2VsZi5zaG93QWxlcnQoKTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2xvZ2luJyB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgbW92ZVVwKCBpZCApew0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgYXhpb3MuZ2V0KCAgdGhpcy4kYXBpQWRyZXNzICsgJy9hcGkvcm9sZXMvbW92ZS9tb3ZlLXVwP2lkPScgKyBpZCArICcmdG9rZW49JyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhcGlfdG9rZW4iKSkNCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdTdWNjZXNzZnVsbHkgbW92ZSByb2xlLic7DQogICAgICAgICAgc2VsZi5zaG93QWxlcnQoKTsNCiAgICAgICAgICBzZWxmLmdldFJvbGVzKCk7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBtb3ZlRG93biggaWQgKXsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIGF4aW9zLmdldCggIHRoaXMuJGFwaUFkcmVzcyArICcvYXBpL3JvbGVzL21vdmUvbW92ZS1kb3duP2lkPScgKyBpZCArICcmdG9rZW49JyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhcGlfdG9rZW4iKSkNCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICdTdWNjZXNzZnVsbHkgbW92ZSByb2xlLic7DQogICAgICAgICAgc2VsZi5zaG93QWxlcnQoKTsNCiAgICAgICAgICBzZWxmLmdldFJvbGVzKCk7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBjcmVhdGVSb2xlICgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAncm9sZXMvY3JlYXRlJ30pOw0KICAgIH0sDQogICAgY291bnREb3duQ2hhbmdlZCAoZGlzbWlzc0NvdW50RG93bikgew0KICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bg0KICAgIH0sDQogICAgc2hvd0FsZXJ0ICgpIHsNCiAgICAgIHRoaXMuZGlzbWlzc0NvdW50RG93biA9IHRoaXMuZGlzbWlzc1NlY3MNCiAgICB9LA0KICAgIGdldFJvbGVzICgpew0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgYXhpb3MuZ2V0KCAgdGhpcy4kYXBpQWRyZXNzICsgJy9hcGkvcm9sZXM/dG9rZW49JyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhcGlfdG9rZW4iKSApDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgc2VsZi5pdGVtcyA9IHJlc3BvbnNlLmRhdGE7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pOw0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkOiBmdW5jdGlvbigpew0KICAgIHRoaXMuZ2V0Um9sZXMoKTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Roles.vue","sourceRoot":"src/views/roles","sourcesContent":["<template>\r\n  <CRow>\r\n    <CCol col=\"12\" xl=\"12\">\r\n      <transition name=\"slide\">\r\n      <CCard>\r\n        <CCardBody>\r\n            <h4>Roles</h4>\r\n            <CButton color=\"primary\" @click=\"createRole()\">Create Role</CButton>\r\n            <CAlert\r\n              :show.sync=\"dismissCountDown\"\r\n              color=\"primary\"\r\n              fade\r\n            >\r\n              ({{dismissCountDown}}) {{ message }}\r\n            </CAlert>\r\n            <CDataTable\r\n              hover\r\n              :items=\"items\"\r\n              :fields=\"fields\"\r\n              :items-per-page=\"10\"\r\n              pagination\r\n            >\r\n              <template #name=\"{item}\">\r\n                <td>\r\n                  <strong>{{item.name}}</strong>\r\n                </td>\r\n              </template>\r\n              <template #hierarchy=\"{item}\">\r\n                <td>\r\n                  <strong>{{item.hierarchy}}</strong>\r\n                </td>\r\n              </template>\r\n              <template #move-up=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"moveUp( item.id )\">Move Up</CButton>\r\n                </td>\r\n              </template>\r\n              <template #move-down=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"moveDown( item.id )\">Move Down</CButton>\r\n                </td>\r\n              </template>\r\n              <template #show=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"showRole( item.id )\">Show</CButton>\r\n                </td>\r\n              </template>\r\n              <template #edit=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"editRole( item.id )\">Edit</CButton>\r\n                </td>\r\n              </template>\r\n              <template #delete=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"danger\" @click=\"deleteRole( item.id )\">Delete</CButton>\r\n                </td>\r\n              </template>\r\n            </CDataTable>\r\n        </CCardBody>  \r\n      </CCard>\r\n      </transition>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'Roles',\r\n  data: () => {\r\n    return {\r\n      items: [],\r\n      fields: ['name', 'hierarchy', 'move-up', 'move-down', 'show', 'edit', 'delete'],\r\n      currentPage: 1,\r\n      perPage: 5,\r\n      totalRows: 0,\r\n      you: null,\r\n      message: '',\r\n      showMessage: false,\r\n      dismissSecs: 7,\r\n      dismissCountDown: 0,\r\n      showDismissibleAlert: false\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    getRowCount (items) {\r\n      return items.length\r\n    },\r\n    roleLink (id) {\r\n      return `roles/${id.toString()}`\r\n    },\r\n    editLink (id) {\r\n      return `roles/${id.toString()}/edit`\r\n    },\r\n    showRole ( id ) {\r\n      const roleLink = this.roleLink( id );\r\n      this.$router.push({path: roleLink});\r\n    },\r\n    editRole ( id ) {\r\n      const editLink = this.editLink( id );\r\n      this.$router.push({path: editLink});\r\n    },\r\n    deleteRole ( id ) {\r\n      let self = this;\r\n      let noteId = id;\r\n      axios.post(  this.$apiAdress + '/api/roles/' + id + '?token=' + localStorage.getItem(\"api_token\"), {\r\n        _method: 'DELETE'\r\n      })\r\n      .then(function (response) {\r\n        if(response.data.status === 'success'){\r\n            self.message = 'Successfully deleted role.';\r\n            self.showAlert();\r\n            self.getRoles();\r\n        }else if(response.data.status === 'rejected'){\r\n            self.message = \"Can't delete. Role has assigned one or more menu elements.\";\r\n            self.showAlert();\r\n        }\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    moveUp( id ){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/roles/move/move-up?id=' + id + '&token=' + localStorage.getItem(\"api_token\"))\r\n      .then(function (response) {\r\n          self.message = 'Successfully move role.';\r\n          self.showAlert();\r\n          self.getRoles();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    moveDown( id ){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/roles/move/move-down?id=' + id + '&token=' + localStorage.getItem(\"api_token\"))\r\n      .then(function (response) {\r\n          self.message = 'Successfully move role.';\r\n          self.showAlert();\r\n          self.getRoles();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    createRole () {\r\n      this.$router.push({path: 'roles/create'});\r\n    },\r\n    countDownChanged (dismissCountDown) {\r\n      this.dismissCountDown = dismissCountDown\r\n    },\r\n    showAlert () {\r\n      this.dismissCountDown = this.dismissSecs\r\n    },\r\n    getRoles (){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/roles?token=' + localStorage.getItem(\"api_token\") )\r\n      .then(function (response) {\r\n        self.items = response.data;\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    }\r\n  },\r\n  mounted: function(){\r\n    this.getRoles();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card-body >>> table > tbody > tr > td {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}