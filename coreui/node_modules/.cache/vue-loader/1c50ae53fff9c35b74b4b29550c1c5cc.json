{"remainingRequest":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\users\\Users.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\users\\Users.vue","mtime":1685723693303},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1VzZXJzJywNCiAgZGF0YTogKCkgPT4gew0KICAgIHJldHVybiB7DQogICAgICBpdGVtczogW10sDQogICAgICBmaWVsZHM6IFsnaWQnLCAnbmFtZScsICdyZWdpc3RlcmVkJywgJ3JvbGVzJywgJ3N0YXR1cycsICdzaG93JywgJ2VkaXQnLCAnZGVsZXRlJ10sDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIHBlclBhZ2U6IDUsDQogICAgICB0b3RhbFJvd3M6IDAsDQogICAgICB5b3U6IG51bGwsDQogICAgICBtZXNzYWdlOiAnJywNCiAgICAgIHNob3dNZXNzYWdlOiBmYWxzZSwNCiAgICAgIGRpc21pc3NTZWNzOiA3LA0KICAgICAgZGlzbWlzc0NvdW50RG93bjogMCwNCiAgICAgIHNob3dEaXNtaXNzaWJsZUFsZXJ0OiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgcGFnaW5hdGlvblByb3BzOiB7DQogICAgYWxpZ246ICdjZW50ZXInLA0KICAgIGRvdWJsZUFycm93czogZmFsc2UsDQogICAgcHJldmlvdXNCdXR0b25IdG1sOiAncHJldicsDQogICAgbmV4dEJ1dHRvbkh0bWw6ICduZXh0Jw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0QmFkZ2UgKHN0YXR1cykgew0KICAgICAgcmV0dXJuIHN0YXR1cyA9PT0gJ0FjdGl2ZScgPyAnc3VjY2VzcycNCiAgICAgICAgOiBzdGF0dXMgPT09ICdJbmFjdGl2ZScgPyAnc2Vjb25kYXJ5Jw0KICAgICAgICAgIDogc3RhdHVzID09PSAnUGVuZGluZycgPyAnd2FybmluZycNCiAgICAgICAgICAgIDogc3RhdHVzID09PSAnQmFubmVkJyA/ICdkYW5nZXInIDogJ3ByaW1hcnknDQogICAgfSwNCiAgICB1c2VyTGluayAoaWQpIHsNCiAgICAgIHJldHVybiBgdXNlcnMvJHtpZC50b1N0cmluZygpfWANCiAgICB9LA0KICAgIGVkaXRMaW5rIChpZCkgew0KICAgICAgcmV0dXJuIGB1c2Vycy8ke2lkLnRvU3RyaW5nKCl9L2VkaXRgDQogICAgfSwNCiAgICBzaG93VXNlciAoIGlkICkgew0KICAgICAgY29uc3QgdXNlckxpbmsgPSB0aGlzLnVzZXJMaW5rKCBpZCApOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6IHVzZXJMaW5rfSk7DQogICAgfSwNCiAgICBlZGl0VXNlciAoIGlkICkgew0KICAgICAgY29uc3QgZWRpdExpbmsgPSB0aGlzLmVkaXRMaW5rKCBpZCApOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6IGVkaXRMaW5rfSk7DQogICAgfSwNCiAgICBkZWxldGVVc2VyICggaWQgKSB7DQogICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICBsZXQgdXNlcklkID0gaWQ7DQogICAgICBheGlvcy5wb3N0KCAgdGhpcy4kYXBpQWRyZXNzICsgJy9hcGkvdXNlcnMvJyArIGlkICsgJz90b2tlbj0nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFwaV90b2tlbiIpLCB7DQogICAgICAgIF9tZXRob2Q6ICdERUxFVEUnDQogICAgICB9KQ0KICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgc2VsZi5tZXNzYWdlID0gJ1N1Y2Nlc3NmdWxseSBkZWxldGVkIHVzZXIuJzsNCiAgICAgICAgICBzZWxmLnNob3dBbGVydCgpOw0KICAgICAgICAgIHNlbGYuZ2V0VXNlcnMoKTsNCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9sb2dpbicgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGNvdW50RG93bkNoYW5nZWQgKGRpc21pc3NDb3VudERvd24pIHsNCiAgICAgIHRoaXMuZGlzbWlzc0NvdW50RG93biA9IGRpc21pc3NDb3VudERvd24NCiAgICB9LA0KICAgIHNob3dBbGVydCAoKSB7DQogICAgICB0aGlzLmRpc21pc3NDb3VudERvd24gPSB0aGlzLmRpc21pc3NTZWNzDQogICAgfSwNCiAgICBnZXRVc2VycyAoKXsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIGF4aW9zLmdldCggIHRoaXMuJGFwaUFkcmVzcyArICcvYXBpL3VzZXJzP3Rva2VuPScgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXBpX3Rva2VuIikpDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgc2VsZi5pdGVtcyA9IHJlc3BvbnNlLmRhdGEudXNlcnM7DQogICAgICAgIHNlbGYueW91ID0gcmVzcG9uc2UuZGF0YS55b3U7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pOw0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkOiBmdW5jdGlvbigpew0KICAgIHRoaXMuZ2V0VXNlcnMoKTsNCiAgfQ0KfQ0K"},{"version":3,"sources":["Users.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Users.vue","sourceRoot":"src/views/users","sourcesContent":["<template>\r\n  <CRow>\r\n    <CCol col=\"12\" xl=\"8\">\r\n      <transition name=\"slide\">\r\n      <CCard>\r\n        <CCardHeader>\r\n            Users\r\n        </CCardHeader>\r\n        <CCardBody>\r\n          <CAlert\r\n            :show.sync=\"dismissCountDown\"\r\n            color=\"primary\"\r\n            fade\r\n          >\r\n            ({{dismissCountDown}}) {{ message }}\r\n          </CAlert>\r\n          <CDataTable\r\n            hover\r\n            striped\r\n            :items=\"items\"\r\n            :fields=\"fields\"\r\n            :items-per-page=\"5\"\r\n            pagination\r\n          >\r\n          <template #status=\"{item}\">\r\n            <td>\r\n              <CBadge :color=\"getBadge(item.status)\">{{ item.status }}</CBadge>\r\n            </td>\r\n          </template>\r\n          <template #show=\"{item}\">\r\n            <td>\r\n              <CButton color=\"primary\" @click=\"showUser( item.id )\">Show</CButton>\r\n            </td>\r\n          </template>\r\n          <template #edit=\"{item}\">\r\n            <td>\r\n              <CButton color=\"primary\" @click=\"editUser( item.id )\">Edit</CButton>\r\n            </td>\r\n          </template>\r\n          <template #delete=\"{item}\">\r\n            <td>\r\n              <CButton v-if=\"you!=item.id\" color=\"danger\" @click=\"deleteUser( item.id )\">Delete</CButton>\r\n            </td>\r\n          </template>\r\n        </CDataTable>\r\n        </CCardBody>\r\n      </CCard>\r\n      </transition>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'Users',\r\n  data: () => {\r\n    return {\r\n      items: [],\r\n      fields: ['id', 'name', 'registered', 'roles', 'status', 'show', 'edit', 'delete'],\r\n      currentPage: 1,\r\n      perPage: 5,\r\n      totalRows: 0,\r\n      you: null,\r\n      message: '',\r\n      showMessage: false,\r\n      dismissSecs: 7,\r\n      dismissCountDown: 0,\r\n      showDismissibleAlert: false\r\n    }\r\n  },\r\n  paginationProps: {\r\n    align: 'center',\r\n    doubleArrows: false,\r\n    previousButtonHtml: 'prev',\r\n    nextButtonHtml: 'next'\r\n  },\r\n  methods: {\r\n    getBadge (status) {\r\n      return status === 'Active' ? 'success'\r\n        : status === 'Inactive' ? 'secondary'\r\n          : status === 'Pending' ? 'warning'\r\n            : status === 'Banned' ? 'danger' : 'primary'\r\n    },\r\n    userLink (id) {\r\n      return `users/${id.toString()}`\r\n    },\r\n    editLink (id) {\r\n      return `users/${id.toString()}/edit`\r\n    },\r\n    showUser ( id ) {\r\n      const userLink = this.userLink( id );\r\n      this.$router.push({path: userLink});\r\n    },\r\n    editUser ( id ) {\r\n      const editLink = this.editLink( id );\r\n      this.$router.push({path: editLink});\r\n    },\r\n    deleteUser ( id ) {\r\n      let self = this;\r\n      let userId = id;\r\n      axios.post(  this.$apiAdress + '/api/users/' + id + '?token=' + localStorage.getItem(\"api_token\"), {\r\n        _method: 'DELETE'\r\n      })\r\n      .then(function (response) {\r\n          self.message = 'Successfully deleted user.';\r\n          self.showAlert();\r\n          self.getUsers();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    countDownChanged (dismissCountDown) {\r\n      this.dismissCountDown = dismissCountDown\r\n    },\r\n    showAlert () {\r\n      this.dismissCountDown = this.dismissSecs\r\n    },\r\n    getUsers (){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/users?token=' + localStorage.getItem(\"api_token\"))\r\n      .then(function (response) {\r\n        self.items = response.data.users;\r\n        self.you = response.data.you;\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    }\r\n  },\r\n  mounted: function(){\r\n    this.getUsers();\r\n  }\r\n}\r\n</script>\r\n"]}]}