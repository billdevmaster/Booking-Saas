{"remainingRequest":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\menuElements\\CreateMenuElement.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\menuElements\\CreateMenuElement.vue","mtime":1685838559058},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdDcmVhdGVNZW51RWxlbWVudCcsDQogIGRhdGE6ICgpID0+IHsNCiAgICByZXR1cm4gew0KICAgICAgICByb2xlOiBbXSwNCiAgICAgICAgbWVudWxpc3Q6IFtdLA0KICAgICAgICBwYXJlbnRzOiBbXSwNCiAgICAgICAgdHlwZXM6IFsNCiAgICAgICAgICB7bGFiZWw6ICdMaW5rJywgdmFsdWU6ICdsaW5rJ30sDQogICAgICAgICAge2xhYmVsOiAnVGl0bGUnLCB2YWx1ZTogJ3RpdGxlJ30sDQogICAgICAgICAge2xhYmVsOiAnRHJvcGRvd24nLCB2YWx1ZTogJ2Ryb3Bkb3duJ30sDQogICAgICAgIF0sDQogICAgICAgIG1lbnVlbGVtZW50OnsNCiAgICAgICAgICBtZW51OiAwLA0KICAgICAgICAgIG5hbWU6ICcnLA0KICAgICAgICAgIHJvbGU6IFtdLA0KICAgICAgICAgIHR5cGU6ICdsaW5rJywNCiAgICAgICAgICBocmVmOiAnJywNCiAgICAgICAgICBpY29uOiAnJywNCiAgICAgICAgICBwYXJlbnQ6ICJub25lIiwNCiAgICAgICAgfSwNCiAgICAgICAgbWVzc2FnZTogJycsDQogICAgICAgIGRpc21pc3NTZWNzOiA3LA0KICAgICAgICBkaXNtaXNzQ291bnREb3duOiAwLA0KICAgICAgICBzaG93RGlzbWlzc2libGVBbGVydDogZmFsc2UsDQogICAgICAgIGRpdkhyZWY6IGZhbHNlLA0KICAgICAgICBkaXZEcm9wZG93blBhcmVudDogZmFsc2UsDQogICAgICAgIGRpdkljb246IGZhbHNlLA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdvQmFjaygpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkNCiAgICAgIC8vIHRoaXMuJHJvdXRlci5yZXBsYWNlKHtwYXRoOiAnL3VzZXJzJ30pDQogICAgfSwNCiAgICBzZWxlY3RSYWRpb1NlbGVjdFJvbGUocm9sZSl7DQogICAgICBsZXQgdGVtcCA9IHRoaXMubWVudWVsZW1lbnQucm9sZS5pbmRleE9mKHJvbGUpOyANCiAgICAgIGlmICh0ZW1wID4gLTEpIHsNCiAgICAgICAgdGhpcy5tZW51ZWxlbWVudC5yb2xlLnNwbGljZSh0ZW1wLCAxKTsNCiAgICAgIH1lbHNlew0KICAgICAgICB0aGlzLm1lbnVlbGVtZW50LnJvbGUucHVzaChyb2xlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNoYW5nZVR5cGUoKXsNCiAgICAgIGxldCB0ZW1wID0gdGhpcy5tZW51ZWxlbWVudC50eXBlDQogICAgICBpZih0ZW1wID09ICd0aXRsZScpew0KICAgICAgICB0aGlzLmRpdkhyZWYgPSBmYWxzZQ0KICAgICAgICB0aGlzLmRpdkRyb3Bkb3duUGFyZW50ID0gZmFsc2UNCiAgICAgICAgdGhpcy5kaXZJY29uID0gZmFsc2UNCiAgICAgIH1lbHNlIGlmKHRlbXAgPT0gJ2xpbmsnKXsNCiAgICAgICAgdGhpcy5kaXZIcmVmID0gdHJ1ZQ0KICAgICAgICB0aGlzLmRpdkRyb3Bkb3duUGFyZW50ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmRpdkljb24gPSB0cnVlDQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy5kaXZIcmVmID0gZmFsc2UNCiAgICAgICAgdGhpcy5kaXZEcm9wZG93blBhcmVudCA9IHRydWUNCiAgICAgICAgdGhpcy5kaXZJY29uID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgdXBkYXRlU2VsZWN0UGFyZW50KCl7DQogICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICBheGlvcy5nZXQoICB0aGlzLiRhcGlBZHJlc3MgKyAnL2FwaS9tZW51L2VsZW1lbnQvZ2V0LXBhcmVudHM/dG9rZW49JyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhcGlfdG9rZW4iKSArICcmbWVudT0nICsgc2VsZi5tZW51ZWxlbWVudC5tZW51DQogICAgICApDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgc2VsZi5wYXJlbnRzID0gW3tsYWJlbDogJ0hhcyBubyBwYXJlbnQnLCB2YWx1ZTogJ25vbmUnfV0NCiAgICAgICAgZm9yKGxldCBpID0gMDsgaTxyZXNwb25zZS5kYXRhLmxlbmd0aDsgaSsrKXsNCiAgICAgICAgICBzZWxmLnBhcmVudHMucHVzaChyZXNwb25zZS5kYXRhW2ldKQ0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICdsb2dpbicgfSk7IA0KICAgICAgfSk7DQogICAgfSwNCiAgICBzdG9yZSgpIHsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGYubWVudWVsZW1lbnQucGFyZW50KTsNCiAgICAgIC8vIHJldHVybjsNCiAgICAgIGF4aW9zLnBvc3QoICB0aGlzLiRhcGlBZHJlc3MgKyAnL2FwaS9tZW51L2VsZW1lbnQvc3RvcmU/dG9rZW49JyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhcGlfdG9rZW4iKSwNCiAgICAgICAgc2VsZi5tZW51ZWxlbWVudA0KICAgICAgKQ0KICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgc2VsZi5uYW1lID0gJyc7DQogICAgICAgICAgc2VsZi5tZXNzYWdlID0gJ1N1Y2Nlc3NmdWxseSBjcmVhdGVkIG1lbnUgZWxlbWVudC4nOw0KICAgICAgICAgIHNlbGYuc2hvd0FsZXJ0KCk7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgICBpZihlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gJ1RoZSBnaXZlbiBkYXRhIHdhcyBpbnZhbGlkLicpew0KICAgICAgICAgICAgc2VsZi5tZXNzYWdlID0gJyc7DQogICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnMpIHsNCiAgICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzLmhhc093blByb3BlcnR5KGtleSkpIHsNCiAgICAgICAgICAgICAgICBzZWxmLm1lc3NhZ2UgKz0gZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnNba2V5XVswXSArICcgICc7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHNlbGYuc2hvd0FsZXJ0KCk7DQogICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICdsb2dpbicgfSk7IA0KICAgICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgY291bnREb3duQ2hhbmdlZCAoZGlzbWlzc0NvdW50RG93bikgew0KICAgICAgdGhpcy5kaXNtaXNzQ291bnREb3duID0gZGlzbWlzc0NvdW50RG93bg0KICAgIH0sDQogICAgc2hvd0FsZXJ0ICgpIHsNCiAgICAgIHRoaXMuZGlzbWlzc0NvdW50RG93biA9IHRoaXMuZGlzbWlzc1NlY3MNCiAgICB9LA0KICAgIGdldERhdGEoKSB7DQogICAgICBsZXQgc2VsZiA9IHRoaXM7DQogICAgICBheGlvcy5nZXQoICB0aGlzLiRhcGlBZHJlc3MgKyAnL2FwaS9tZW51L2VsZW1lbnQvY3JlYXRlP3Rva2VuPScgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXBpX3Rva2VuIikgKyAnJmlkPScgKyBzZWxmLiRyb3V0ZS5wYXJhbXMubWVudSApDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgc2VsZi5yb2xlID0gcmVzcG9uc2UuZGF0YS5yb2xlcw0KICAgICAgICBzZWxmLm1lbnVsaXN0ID0gcmVzcG9uc2UuZGF0YS5tZW51bGlzdA0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2xvZ2luJyB9KTsNCiAgICAgIH0pOw0KICAgIH0NCiAgfSwNCiAgbW91bnRlZDogZnVuY3Rpb24oKXsNCiAgICB0aGlzLmdldERhdGEoKQ0KICAgIHRoaXMubWVudWVsZW1lbnQubWVudSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5tZW51DQogICAgdGhpcy51cGRhdGVTZWxlY3RQYXJlbnQoKQ0KICAgIHRoaXMuY2hhbmdlVHlwZSgpDQogIH0NCn0NCg0K"},{"version":3,"sources":["CreateMenuElement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateMenuElement.vue","sourceRoot":"src/views/menuElements","sourcesContent":["<template>\r\n  <CRow>\r\n    <CCol col=\"12\" lg=\"6\">\r\n      <CCard no-header>\r\n        <CCardBody>\r\n          <h3>\r\n            Create Menu Element\r\n          </h3>\r\n          <CAlert\r\n            :show.sync=\"dismissCountDown\"\r\n            color=\"primary\"\r\n            fade\r\n          >\r\n            ({{dismissCountDown}}) {{ message }}\r\n          </CAlert>\r\n            <CSelect\r\n              label=\"Menu\" \r\n              :value.sync=\"menuelement.menu\"\r\n              :plain=\"true\"\r\n              :options=\"menulist\"\r\n              @update:value=\"updateSelectParent()\"\r\n            >\r\n            </CSelect>\r\n            <p>Roles</p>\r\n            <div class=\"m-3\">\r\n              <CInputCheckbox\r\n                  v-for=\"rol in role\"\r\n                  :key=\"rol\"\r\n                  :label=\"rol\"\r\n                  name=\"selectRoles\"\r\n                  @update:checked=\"selectRadioSelectRole(rol)\"\r\n              />\r\n            </div>\r\n            <CInput label=\"Name\" type=\"text\" placeholder=\"Name\" v-model=\"menuelement.name\"></CInput>\r\n            <CSelect\r\n              label=\"Type\" \r\n              :value.sync=\"menuelement.type\"\r\n              :plain=\"true\"\r\n              :options=\"types\"\r\n              @update:value=\"changeType()\"\r\n            >\r\n            </CSelect>\r\n            <p>Other</p>\r\n            <div v-if=\"divHref\">\r\n              <CInput label=\"Href\" type=\"text\" placeholder=\"Href\" v-model=\"menuelement.href\"></CInput>\r\n            </div>\r\n            <div v-if=\"divDropdownParent\">\r\n              <CSelect\r\n                label=\"Dropdown parent\" \r\n                :value.sync=\"menuelement.parent\"\r\n                :plain=\"true\"\r\n                :options=\"parents\"\r\n              >\r\n              </CSelect>\r\n            </div>\r\n            <div v-if=\"divIcon\">\r\n              Icon - Find icon class in: \r\n              <a \r\n                href=\"https://coreui.io/docs/icons/icons-list/#coreui-icons-free-502-icons\"\r\n                target=\"_blank\"\r\n              >\r\n                CoreUI icons documentation\r\n              </a>\r\n              <br>\r\n              <CInput type=\"text\" placeholder=\"CoreUI Icon class - example: cil-bell\" v-model=\"menuelement.icon\"></CInput>\r\n            </div>\r\n          <CButton color=\"primary\" @click=\"store()\">Create</CButton>\r\n          <CButton color=\"primary\" @click=\"goBack\">Back</CButton>\r\n        </CCardBody>\r\n      </CCard>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  name: 'CreateMenuElement',\r\n  data: () => {\r\n    return {\r\n        role: [],\r\n        menulist: [],\r\n        parents: [],\r\n        types: [\r\n          {label: 'Link', value: 'link'},\r\n          {label: 'Title', value: 'title'},\r\n          {label: 'Dropdown', value: 'dropdown'},\r\n        ],\r\n        menuelement:{\r\n          menu: 0,\r\n          name: '',\r\n          role: [],\r\n          type: 'link',\r\n          href: '',\r\n          icon: '',\r\n          parent: \"none\",\r\n        },\r\n        message: '',\r\n        dismissSecs: 7,\r\n        dismissCountDown: 0,\r\n        showDismissibleAlert: false,\r\n        divHref: false,\r\n        divDropdownParent: false,\r\n        divIcon: false,\r\n    }\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1)\r\n      // this.$router.replace({path: '/users'})\r\n    },\r\n    selectRadioSelectRole(role){\r\n      let temp = this.menuelement.role.indexOf(role); \r\n      if (temp > -1) {\r\n        this.menuelement.role.splice(temp, 1);\r\n      }else{\r\n        this.menuelement.role.push(role);\r\n      }\r\n    },\r\n    changeType(){\r\n      let temp = this.menuelement.type\r\n      if(temp == 'title'){\r\n        this.divHref = false\r\n        this.divDropdownParent = false\r\n        this.divIcon = false\r\n      }else if(temp == 'link'){\r\n        this.divHref = true\r\n        this.divDropdownParent = true\r\n        this.divIcon = true\r\n      }else{\r\n        this.divHref = false\r\n        this.divDropdownParent = true\r\n        this.divIcon = true\r\n      }\r\n    },\r\n    updateSelectParent(){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/menu/element/get-parents?token=' + localStorage.getItem(\"api_token\") + '&menu=' + self.menuelement.menu\r\n      )\r\n      .then(function (response) {\r\n        self.parents = [{label: 'Has no parent', value: 'none'}]\r\n        for(let i = 0; i<response.data.length; i++){\r\n          self.parents.push(response.data[i])\r\n        }\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: 'login' }); \r\n      });\r\n    },\r\n    store() {\r\n      let self = this;\r\n      // console.log(self.menuelement.parent);\r\n      // return;\r\n      axios.post(  this.$apiAdress + '/api/menu/element/store?token=' + localStorage.getItem(\"api_token\"),\r\n        self.menuelement\r\n      )\r\n      .then(function (response) {\r\n          self.name = '';\r\n          self.message = 'Successfully created menu element.';\r\n          self.showAlert();\r\n      }).catch(function (error) {\r\n          if(error.response.data.message == 'The given data was invalid.'){\r\n            self.message = '';\r\n            for (let key in error.response.data.errors) {\r\n              if (error.response.data.errors.hasOwnProperty(key)) {\r\n                self.message += error.response.data.errors[key][0] + '  ';\r\n              }\r\n            }\r\n            self.showAlert();\r\n          }else{\r\n            console.log(error);\r\n            self.$router.push({ path: 'login' }); \r\n          }\r\n      });\r\n    },\r\n    countDownChanged (dismissCountDown) {\r\n      this.dismissCountDown = dismissCountDown\r\n    },\r\n    showAlert () {\r\n      this.dismissCountDown = this.dismissSecs\r\n    },\r\n    getData() {\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/menu/element/create?token=' + localStorage.getItem(\"api_token\") + '&id=' + self.$route.params.menu )\r\n      .then(function (response) {\r\n        self.role = response.data.roles\r\n        self.menulist = response.data.menulist\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    }\r\n  },\r\n  mounted: function(){\r\n    this.getData()\r\n    this.menuelement.menu = this.$route.params.menu\r\n    this.updateSelectParent()\r\n    this.changeType()\r\n  }\r\n}\r\n\r\n</script>\r\n"]}]}