{"remainingRequest":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\menuElements\\ElementsIndex.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\menuElements\\ElementsIndex.vue","mtime":1685802353665},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgeyBjaWxBcnJvd1RoaWNrVG9SaWdodCB9IGZyb20gJ0Bjb3JldWkvaWNvbnMnDQpleHBvcnQgZGVmYXVsdCB7DQogIGFycm93SWNvbjogY2lsQXJyb3dUaGlja1RvUmlnaHQsDQogIG5hbWU6ICdNZW51SW5kZXgnLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZmllbGRzOiBbJ2Ryb3Bkb3duJywgJ25hbWUnLCAndXAnLCAnZG93bicsICdzaG93JywgJ2VkaXQnLCAnZGVsZXRlJ10sDQogICAgICBpdGVtczogW10sDQogICAgICBidWZmb3I6IFtdLA0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFkZEVsZW1lbnRUb0J1ZmZvcihkYXRhLCBpY29uKXsNCiAgICAgIHRoaXMuYnVmZm9yLnB1c2goDQogICAgICAgIHsNCiAgICAgICAgICBkcm9wZG93bjogaWNvbiwNCiAgICAgICAgICBuYW1lOiBkYXRhWyduYW1lJ10sDQogICAgICAgICAgaWQ6IGRhdGFbJ2lkJ10sDQogICAgICAgICAgc2x1ZzogZGF0YVsnc2x1ZyddLA0KICAgICAgICAgIGFzc2lnbmVkOiBkYXRhWydhc3NpZ25lZCddLA0KICAgICAgICB9DQogICAgICApOw0KICAgIH0sDQogICAgaW5uZXJCdWlsZEFycmF5RGF0YShkYXRhLCBkZWVwKXsNCiAgICAgIGZvcihsZXQgaT0wOyBpPGRhdGEubGVuZ3RoOyBpKyspew0KICAgICAgICBzd2l0Y2goZGF0YVtpXVsnc2x1ZyddKXsNCiAgICAgICAgICBjYXNlICdsaW5rJzoNCiAgICAgICAgICAgIGlmKGRlZXAgPiAxKXsNCiAgICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50VG9CdWZmb3IoZGF0YVtpXSwgdHJ1ZSk7DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50VG9CdWZmb3IoZGF0YVtpXSwgZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIGJyZWFrDQogICAgICAgICAgY2FzZSAndGl0bGUnOg0KICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50VG9CdWZmb3IoZGF0YVtpXSwgZmFsc2UpOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgIGNhc2UgJ2Ryb3Bkb3duJzoNCiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudFRvQnVmZm9yKGRhdGFbaV0sIGZhbHNlKTsNCiAgICAgICAgICAgIHRoaXMuaW5uZXJCdWlsZEFycmF5RGF0YShkYXRhW2ldWydlbGVtZW50cyddLCBkZWVwKzEpDQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGJ1aWxkQXJyYXlEYXRhKGRhdGEpew0KICAgICAgdGhpcy5idWZmb3IgPSBbXTsNCiAgICAgIHRoaXMuaW5uZXJCdWlsZEFycmF5RGF0YShkYXRhLCAxKTsNCiAgICAgIHJldHVybiB0aGlzLmJ1ZmZvcjsNCiAgICB9LA0KICAgIGFkZEVsZW1lbnRUb01lbnUoKXsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAnbWVudWVsZW1lbnQvY3JlYXRlJ30pOw0KICAgIH0sDQogICAgc2hvd01lbnUoaWQpew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6IGBtZW51ZWxlbWVudC8ke2lkLnRvU3RyaW5nKCl9YH0pOw0KICAgIH0sDQogICAgZWRpdE1lbnUoaWQpey8vOm1lbnUvbWVudWVsZW1lbnQvOmlkL2VkaXQNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiBgbWVudWVsZW1lbnQvJHtpZC50b1N0cmluZygpfS9lZGl0YH0pOw0KICAgIH0sDQogICAgZGVsZXRlTWVudShpZCl7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogYG1lbnVlbGVtZW50LyR7aWQudG9TdHJpbmcoKX0vZGVsZXRlYH0pOw0KICAgIH0sDQogICAgbW92ZVVwKGlkKXsNCiAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgIGF4aW9zLmdldCggIHRoaXMuJGFwaUFkcmVzcyArICcvYXBpL21lbnUvZWxlbWVudC9tb3ZlLXVwP3Rva2VuPScgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXBpX3Rva2VuIikgKyAnJmlkPScgKyBpZCApDQogICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsNCiAgICAgICAgc2VsZi5nZXRFbGVtZW50cygpOw0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgc2VsZi4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2xvZ2luJyB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgbW92ZURvd24oaWQpew0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgYXhpb3MuZ2V0KCAgdGhpcy4kYXBpQWRyZXNzICsgJy9hcGkvbWVudS9lbGVtZW50L21vdmUtZG93bj90b2tlbj0nICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFwaV90b2tlbiIpICsgJyZpZD0nICsgaWQgKQ0KICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgIHNlbGYuZ2V0RWxlbWVudHMoKTsNCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICAgIHNlbGYuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9sb2dpbicgfSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldEVsZW1lbnRzKCkgew0KICAgICAgbGV0IHNlbGYgPSB0aGlzOw0KICAgICAgY29uc29sZS5sb2coc2VsZi4kcm91dGUucGFyYW1zLm1lbnUpDQogICAgICBheGlvcy5nZXQoICB0aGlzLiRhcGlBZHJlc3MgKyAnL2FwaS9tZW51L2VsZW1lbnQ/dG9rZW49JyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhcGlfdG9rZW4iKSArICcmbWVudT0nICsgc2VsZi4kcm91dGUucGFyYW1zLm1lbnUgKQ0KICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgIHNlbGYuaXRlbXMgPSBzZWxmLmJ1aWxkQXJyYXlEYXRhKHJlc3BvbnNlLmRhdGEubWVudVRvRWRpdCk7DQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgICBzZWxmLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvbG9naW4nIH0pOw0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgdGhpcy5nZXRFbGVtZW50cygpOw0KICB9DQp9DQo="},{"version":3,"sources":["ElementsIndex.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ElementsIndex.vue","sourceRoot":"src/views/menuElements","sourcesContent":["<template>\r\n  <CRow>\r\n    <CCol col=\"12\" xl=\"12\">\r\n      <transition name=\"slide\">\r\n        <CCard>\r\n          <CCardBody>\r\n            <h4>\r\n              Menus\r\n            </h4>\r\n              <CButton color=\"primary\" @click=\"addElementToMenu()\" class=\"mb-3\">Add Element to Menu</CButton>\r\n              <CDataTable\r\n                hover\r\n                :items=\"items\"\r\n                :fields=\"fields\"\r\n                :items-per-page=\"30\"\r\n                pagination\r\n              >\r\n                <template #dropdown=\"{item}\">\r\n                  <td>\r\n                    <CIcon v-if=\"item.dropdown\" :content=\"$options.arrowIcon\"/>\r\n                  </td>\r\n                </template>\r\n                <template #name=\"{item}\">\r\n                  <td>\r\n                    <strong>{{item.name}}</strong>\r\n                  </td>\r\n                </template>\r\n                <template #up=\"{item}\">\r\n                  <td>\r\n                    <CButton color=\"primary\" @click=\"moveUp( item.id )\">Move Up</CButton>\r\n                  </td>\r\n                </template>\r\n                <template #down=\"{item}\">\r\n                  <td>\r\n                    <CButton color=\"primary\" @click=\"moveDown( item.id )\">Move Down</CButton>\r\n                  </td>\r\n                </template>\r\n                <template #show=\"{item}\">\r\n                  <td>\r\n                    <CButton color=\"primary\" @click=\"showMenu( item.id )\">Show</CButton>\r\n                  </td>\r\n                </template>\r\n                <template #edit=\"{item}\">\r\n                  <td>\r\n                    <CButton color=\"primary\" @click=\"editMenu( item.id )\">Edit</CButton>\r\n                  </td>\r\n                </template>\r\n                <template #delete=\"{item}\">\r\n                  <td>\r\n                    <CButton color=\"danger\" @click=\"deleteMenu( item.id )\">Delete</CButton>\r\n                  </td>\r\n                </template>\r\n              </CDataTable>\r\n          </CCardBody>  \r\n        </CCard>\r\n      </transition>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport { cilArrowThickToRight } from '@coreui/icons'\r\nexport default {\r\n  arrowIcon: cilArrowThickToRight,\r\n  name: 'MenuIndex',\r\n  data () {\r\n    return {\r\n      fields: ['dropdown', 'name', 'up', 'down', 'show', 'edit', 'delete'],\r\n      items: [],\r\n      buffor: [],\r\n    }\r\n  },\r\n  methods: {\r\n    addElementToBuffor(data, icon){\r\n      this.buffor.push(\r\n        {\r\n          dropdown: icon,\r\n          name: data['name'],\r\n          id: data['id'],\r\n          slug: data['slug'],\r\n          assigned: data['assigned'],\r\n        }\r\n      );\r\n    },\r\n    innerBuildArrayData(data, deep){\r\n      for(let i=0; i<data.length; i++){\r\n        switch(data[i]['slug']){\r\n          case 'link':\r\n            if(deep > 1){\r\n              this.addElementToBuffor(data[i], true);\r\n            }else{\r\n              this.addElementToBuffor(data[i], false);\r\n            }\r\n          break\r\n          case 'title':\r\n            this.addElementToBuffor(data[i], false);\r\n          break;\r\n          case 'dropdown':\r\n            this.addElementToBuffor(data[i], false);\r\n            this.innerBuildArrayData(data[i]['elements'], deep+1)\r\n          break;\r\n        }\r\n      }\r\n    },\r\n    buildArrayData(data){\r\n      this.buffor = [];\r\n      this.innerBuildArrayData(data, 1);\r\n      return this.buffor;\r\n    },\r\n    addElementToMenu(){\r\n      this.$router.push({path: 'menuelement/create'});\r\n    },\r\n    showMenu(id){\r\n      this.$router.push({path: `menuelement/${id.toString()}`});\r\n    },\r\n    editMenu(id){//:menu/menuelement/:id/edit\r\n      this.$router.push({path: `menuelement/${id.toString()}/edit`});\r\n    },\r\n    deleteMenu(id){\r\n      this.$router.push({path: `menuelement/${id.toString()}/delete`});\r\n    },\r\n    moveUp(id){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/menu/element/move-up?token=' + localStorage.getItem(\"api_token\") + '&id=' + id )\r\n      .then(function (response) {\r\n        self.getElements();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    moveDown(id){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/menu/element/move-down?token=' + localStorage.getItem(\"api_token\") + '&id=' + id )\r\n      .then(function (response) {\r\n        self.getElements();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    getElements() {\r\n      let self = this;\r\n      console.log(self.$route.params.menu)\r\n      axios.get(  this.$apiAdress + '/api/menu/element?token=' + localStorage.getItem(\"api_token\") + '&menu=' + self.$route.params.menu )\r\n      .then(function (response) {\r\n        self.items = self.buildArrayData(response.data.menuToEdit);\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    }\r\n  },\r\n  mounted(){\r\n    this.getElements();\r\n  }\r\n}\r\n</script>\r\n"]}]}