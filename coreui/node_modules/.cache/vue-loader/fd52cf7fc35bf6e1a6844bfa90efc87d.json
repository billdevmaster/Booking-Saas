{"remainingRequest":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\roles\\Roles.vue?vue&type=style&index=0&id=2e1b3321&scoped=true&lang=css&","dependencies":[{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\src\\views\\roles\\Roles.vue","mtime":1685723693300},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2023-Workspace\\0531-booking-estonia\\booking-saas\\coreui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmNhcmQtYm9keSA+Pj4gdGFibGUgPiB0Ym9keSA+IHRyID4gdGQgew0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQo="},{"version":3,"sources":["Roles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgLA;AACA;AACA","file":"Roles.vue","sourceRoot":"src/views/roles","sourcesContent":["<template>\r\n  <CRow>\r\n    <CCol col=\"12\" xl=\"12\">\r\n      <transition name=\"slide\">\r\n      <CCard>\r\n        <CCardBody>\r\n            <h4>Roles</h4>\r\n            <CButton color=\"primary\" @click=\"createRole()\">Create Role</CButton>\r\n            <CAlert\r\n              :show.sync=\"dismissCountDown\"\r\n              color=\"primary\"\r\n              fade\r\n            >\r\n              ({{dismissCountDown}}) {{ message }}\r\n            </CAlert>\r\n            <CDataTable\r\n              hover\r\n              :items=\"items\"\r\n              :fields=\"fields\"\r\n              :items-per-page=\"10\"\r\n              pagination\r\n            >\r\n              <template #name=\"{item}\">\r\n                <td>\r\n                  <strong>{{item.name}}</strong>\r\n                </td>\r\n              </template>\r\n              <template #hierarchy=\"{item}\">\r\n                <td>\r\n                  <strong>{{item.hierarchy}}</strong>\r\n                </td>\r\n              </template>\r\n              <template #move-up=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"moveUp( item.id )\">Move Up</CButton>\r\n                </td>\r\n              </template>\r\n              <template #move-down=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"moveDown( item.id )\">Move Down</CButton>\r\n                </td>\r\n              </template>\r\n              <template #show=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"showRole( item.id )\">Show</CButton>\r\n                </td>\r\n              </template>\r\n              <template #edit=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"primary\" @click=\"editRole( item.id )\">Edit</CButton>\r\n                </td>\r\n              </template>\r\n              <template #delete=\"{item}\">\r\n                <td>\r\n                  <CButton color=\"danger\" @click=\"deleteRole( item.id )\">Delete</CButton>\r\n                </td>\r\n              </template>\r\n            </CDataTable>\r\n        </CCardBody>  \r\n      </CCard>\r\n      </transition>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'Roles',\r\n  data: () => {\r\n    return {\r\n      items: [],\r\n      fields: ['name', 'hierarchy', 'move-up', 'move-down', 'show', 'edit', 'delete'],\r\n      currentPage: 1,\r\n      perPage: 5,\r\n      totalRows: 0,\r\n      you: null,\r\n      message: '',\r\n      showMessage: false,\r\n      dismissSecs: 7,\r\n      dismissCountDown: 0,\r\n      showDismissibleAlert: false\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    getRowCount (items) {\r\n      return items.length\r\n    },\r\n    roleLink (id) {\r\n      return `roles/${id.toString()}`\r\n    },\r\n    editLink (id) {\r\n      return `roles/${id.toString()}/edit`\r\n    },\r\n    showRole ( id ) {\r\n      const roleLink = this.roleLink( id );\r\n      this.$router.push({path: roleLink});\r\n    },\r\n    editRole ( id ) {\r\n      const editLink = this.editLink( id );\r\n      this.$router.push({path: editLink});\r\n    },\r\n    deleteRole ( id ) {\r\n      let self = this;\r\n      let noteId = id;\r\n      axios.post(  this.$apiAdress + '/api/roles/' + id + '?token=' + localStorage.getItem(\"api_token\"), {\r\n        _method: 'DELETE'\r\n      })\r\n      .then(function (response) {\r\n        if(response.data.status === 'success'){\r\n            self.message = 'Successfully deleted role.';\r\n            self.showAlert();\r\n            self.getRoles();\r\n        }else if(response.data.status === 'rejected'){\r\n            self.message = \"Can't delete. Role has assigned one or more menu elements.\";\r\n            self.showAlert();\r\n        }\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    moveUp( id ){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/roles/move/move-up?id=' + id + '&token=' + localStorage.getItem(\"api_token\"))\r\n      .then(function (response) {\r\n          self.message = 'Successfully move role.';\r\n          self.showAlert();\r\n          self.getRoles();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    moveDown( id ){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/roles/move/move-down?id=' + id + '&token=' + localStorage.getItem(\"api_token\"))\r\n      .then(function (response) {\r\n          self.message = 'Successfully move role.';\r\n          self.showAlert();\r\n          self.getRoles();\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    },\r\n    createRole () {\r\n      this.$router.push({path: 'roles/create'});\r\n    },\r\n    countDownChanged (dismissCountDown) {\r\n      this.dismissCountDown = dismissCountDown\r\n    },\r\n    showAlert () {\r\n      this.dismissCountDown = this.dismissSecs\r\n    },\r\n    getRoles (){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/roles?token=' + localStorage.getItem(\"api_token\") )\r\n      .then(function (response) {\r\n        self.items = response.data;\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' });\r\n      });\r\n    }\r\n  },\r\n  mounted: function(){\r\n    this.getRoles();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card-body >>> table > tbody > tr > td {\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}